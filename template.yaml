# More info about AWS Serverless Application Model (SAM):
# https://github.com/aws/serverless-application-model/blob/master/versions/2016-10-31.md

AWSTemplateFormatVersion: "2010-09-09"
Transform: AWS::Serverless-2016-10-31
Description: SAM template for local debugging Lambda functions.

Globals:
  Function:
    Runtime: nodejs18.x
    Handler: index.handler
    Timeout: 10000
    MemorySize: 1024
    Environment:
      Variables:
        NODE_ENV: development
        AUTH_JWT_SECRET: 7b6s4BlGn5eswpLBQueL2coaDrf250vL2IpDoQCq0DtmsEPZBQlssksVfM1YB2l
        RDS_DB_HOST: tikitup-test.ceyeogpl2bhv.eu-west-1.rds.amazonaws.com
        RDS_DB_NAME: tikitup
        RDS_DB_USER: admin
        RDS_DB_PASS: iPEqnOKbpQdUOKXMEiKP
        SQS_QUEUE_NAME: tikitup-test.fifo
        DS_MERCHANT_SECRETKEYS: sq7HjrUOBfKmC576ILgskD5srU870gJ7
        PAYPAL_MODE: sandbox
        PAYPAL_CLIENT_ID: Adm-VwOdiaOG4ostRy8E2hKT37UPC4W1OcjMOKE7G42mwCFez9rqv53208KJG05CaJuayD3eaEFeqWAI
        PAYPAL_CLIENT_SECRET: ${PAYPAL_CLIENT_SECRET}
        PAYPAL_CLIENT_ID_FESTAMATCH: ${PAYPAL_CLIENT_ID_FESTAMATCH}
        PAYPAL_CLIENT_SECRET_FESTAMATCH: ${PAYPAL_CLIENT_SECRET_FESTAMATCH}
        STRIPE_SECRET: ${STRIPE_SECRET}
        STRIPE_ENDPOINT_SECRET: ${STRIPE_ENDPOINT_SECRET}

Resources:
  UserManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/user-management/dist
      Events:
        LoginUser:
          Type: Api
          Properties:
            Path: /v1/users/login
            Method: post
        LoginGoogleUser:
          Type: Api
          Properties:
            Path: /v1/users/google-login
            Method: post
        FindUserByToken:
          Type: Api
          Properties:
            Path: /v1/users/user
            Method: get
        UpdateUserByToken:
          Type: Api
          Properties:
            Path: /v1/users/user
            Method: put
        FindAllUsersDashboard:
          Type: Api
          Properties:
            Path: /v1/users/users-dashboard
            Method: get
        FindAllUsersAffiliate:
          Type: Api
          Properties:
            Path: /v1/users/users-affiliate
            Method: get
        FindAllPendingUsersByPremiseId:
          Type: Api
          Properties:
            Path: /v1/users/pending-users/{id}
            Method: get
        FindAllPendingUsers:
          Type: Api
          Properties:
            Path: /v1/users/pending-users
            Method: get
        FindAllPendingUOPs:
          Type: Api
          Properties:
            Path: /v1/users/pending-uops
            Method: get
        CreateUser:
          Type: Api
          Properties:
            Path: /v1/users/add-user
            Method: post
        CreateDashboardUser:
          Type: Api
          Properties:
            Path: /v1/users/sign-up-dashboard
            Method: post
        CreateAppUser:
          Type: Api
          Properties:
            Path: /v1/users/sign-up-app
            Method: post
        FindUserById:
          Type: Api
          Properties:
            Path: /v1/users/{id}
            Method: get
        UserExists:
          Type: Api
          Properties:
            Path: /v1/users/user-exists/{email}
            Method: get
        UpdateUser:
          Type: Api
          Properties:
            Path: /v1/users/{id}
            Method: put
        DeleteUser:
          Type: Api
          Properties:
            Path: /v1/users/{id}
            Method: delete
        DeleteUserByToken:
          Type: Api
          Properties:
            Path: /v1/users/user
            Method: delete
        ValidateUser:
          Type: Api
          Properties:
            Path: /v1/users/validate-user/{id}
            Method: put
        VerifyUOP:
          Type: Api
          Properties:
            Path: /v1/users/verify-uop/{id}
            Method: put
        ValidateUOP:
          Type: Api
          Properties:
            Path: /v1/users/validate-uop/{id}
            Method: put
        FindPremiseUsers:
          Type: Api
          Properties:
            Path: /v1/users/premise/{id}
            Method: get
        GetUserGrouping:
          Type: Api
          Properties:
            Path: /v1/users/grouping
            Method: get
        CanPublishTrips:
          Type: Api
          Properties:
            Path: /v1/users/can-publish-trips
            Method: get
        CreateRRPPUser:
          Type: Api
          Properties:
            Path: /v1/users/rrpp
            Method: post
        UpdateRRPPUser:
          Type: Api
          Properties:
            Path: /v1/users/rrpp/{id}
            Method: put
        FindRRPPUser:
          Type: Api
          Properties:
            Path: /v1/users/rrpp
            Method: get
        FindRRPPUserById:
          Type: Api
          Properties:
            Path: /v1/users/rrpp/{id}
            Method: get
        AssignRrppsToEvent:
          Type: Api
          Properties:
            Path: /v1/users/rrpp/event/{id}
            Method: post
        RefreshToken:
          Type: Api
          Properties:
            Path: /v1/users/refresh
            Method: get
        SendEmail:
          Type: Api
          Properties:
            Path: /v1/users/send-email
            Method: post
        SetWelcomePackDate:
          Type: Api
          Properties:
            Path: /v1/users/welcome-pack-date/{id}
            Method: put
        CreateOrganization:
          Type: Api
          Properties:
            Path: /v1/organizations
            Method: post
        FindAllOrganizations:
          Type: Api
          Properties:
            Path: /v1/organizations
            Method: get
        FindOrganizationById:
          Type: Api
          Properties:
            Path: /v1/organizations/{id}
            Method: get
        UpdateOrganization:
          Type: Api
          Properties:
            Path: /v1/organizations/{id}
            Method: put
        DeleteOrganization:
          Type: Api
          Properties:
            Path: /v1/organizations/{id}
            Method: delete
        ValidateOrganization:
          Type: Api
          Properties:
            Path: /v1/organizations/validate-organization/{id}
            Method: put
        FindAllGroupings:
          Type: Api
          Properties:
            Path: /v1/organizations/groupings
            Method: get
        FindAllPremises:
          Type: Api
          Properties:
            Path: /v1/premises
            Method: get
        FindPendingPremises:
          Type: Api
          Properties:
            Path: /v1/premises/pending
            Method: get
        FindPremiseById:
          Type: Api
          Properties:
            Path: /v1/premises/{id}
            Method: get
        CreatePremise:
          Type: Api
          Properties:
            Path: /v1/premises
            Method: post
        UpdatePremise:
          Type: Api
          Properties:
            Path: /v1/premises/{id}
            Method: put
        DeletePremise:
          Type: Api
          Properties:
            Path: /v1/premises/{id}
            Method: delete
        ValidatePremise:
          Type: Api
          Properties:
            Path: /v1/premises/validate-premise/{id}
            Method: put
        FindPremisesByCity:
          Type: Api
          Properties:
            Path: /v1/premises/city/{city}
            Method: get
        FindPremisesList:
          Type: Api
          Properties:
            Path: /v1/premises/list
            Method: get
        GetPremiseDomain:
          Type: Api
          Properties:
            Path: /v1/premises/domain/{id}
            Method: get
        FindAllCards:
          Type: Api
          Properties:
            Path: /v1/cards
            Method: get
        FindCardsById:
          Type: Api
          Properties:
            Path: /v1/cards/{id}
            Method: get
        FindCardsByPremiseId:
          Type: Api
          Properties:
            Path: /v1/cards/premise/{id}
            Method: get
        FindCardByToken:
          Type: Api
          Properties:
            Path: /v1/cards/card
            Method: get
        FindUserCards:
          Type: Api
          Properties:
            Path: /v1/cards/user/{id}
            Method: get
        CreateCards:
          Type: Api
          Properties:
            Path: /v1/cards
            Method: post
        UpdateCards:
          Type: Api
          Properties:
            Path: /v1/cards/{id}
            Method: put
        DeleteCards:
          Type: Api
          Properties:
            Path: /v1/cards/{id}
            Method: delete
        ValidateCards:
          Type: Api
          Properties:
            Path: /v1/cards/validate-card/{id}
            Method: put
        RejectCards:
          Type: Api
          Properties:
            Path: /v1/cards/reject-card/{id}
            Method: put
        FindDomainCards:
          Type: Api
          Properties:
            Path: /v1/cards/domain/{id}
            Method: get
        AssignDomainToCard:
          Type: Api
          Properties:
            Path: /v1/cards/domain/{id}
            Method: put
        FindCardAffiliates:
          Type: Api
          Properties:
            Path: /v1/cards/affiliates/{id}
            Method: get
        GetCardsStatistics:
          Type: Api
          Properties:
            Path: /v1/cards/statistics
            Method: get
        ForgotPassword:
          Type: Api
          Properties:
            Path: /v1/users/forgot-password
            Method: post
        ResetPassword:
          Type: Api
          Properties:
            Path: /v1/users/reset-password
            Method: post
        VerifyUser:
          Type: Api
          Properties:
            Path: /v1/users/verify/{id}
            Method: put
        FindAllCategories:
          Type: Api
          Properties:
            Path: /v1/categories
            Method: get
        FindCategoryById:
          Type: Api
          Properties:
            Path: /v1/categories/{id}
            Method: get
        FindSubcategoryById:
          Type: Api
          Properties:
            Path: /v1/categories/subcategory/{id}
            Method: get
        CreateCategory:
          Type: Api
          Properties:
            Path: /v1/categories
            Method: post
        UpdateCategory:
          Type: Api
          Properties:
            Path: /v1/categories/{id}
            Method: put
        FindPremiseCategories:
          Type: Api
          Properties:
            Path: /v1/categories/premise/{id}
            Method: get
        UpdatePremiseCategories:
          Type: Api
          Properties:
            Path: /v1/categories/premise/{id}
            Method: put
        FindDomainCategories:
          Type: Api
          Properties:
            Path: /v1/categories/domain/{id}
            Method: get
        UpdateDomainCategories:
          Type: Api
          Properties:
            Path: /v1/categories/domain/{id}
            Method: put
        FindPremiseDomainsCategories:
          Type: Api
          Properties:
            Path: /v1/categories/premise-domains/{id}
            Method: get
        GetStyle:
          Type: Api
          Properties:
            Path: /v1/domains/styles
            Method: get
        CreateStyle:
          Type: Api
          Properties:
            Path: /v1/styles
            Method: post
        UpdateStyle:
          Type: Api
          Properties:
            Path: /v1/styles/{id}
            Method: put
        GetDomains:
          Type: Api
          Properties:
            Path: /v1/domains
            Method: get
        CreateDomain:
          Type: Api
          Properties:
            Path: /v1/domains
            Method: post
        GetDomain:
          Type: Api
          Properties:
            Path: /v1/domains/{id}
            Method: get
        UpdateDomain:
          Type: Api
          Properties:
            Path: /v1/domains/{id}
            Method: put
        DeleteDomain:
          Type: Api
          Properties:
            Path: /v1/domains/{id}
            Method: delete
        CreateSponsor:
          Type: Api
          Properties:
            Path: /v1/domains/sponsors
            Method: post
        GetDomainSponsors:
          Type: Api
          Properties:
            Path: /v1/domains/sponsors/{id}
            Method: get
        UpdateSponsor:
          Type: Api
          Properties:
            Path: /v1/domains/sponsors/{id}
            Method: put
        DeleteSponsor:
          Type: Api
          Properties:
            Path: /v1/domains/sponsors/{id}
            Method: delete
        GetDomainCards:
          Type: Api
          Properties:
            Path: /v1/domains/cards/{id}
            Method: get
        GrandDomainControl:
          Type: Api
          Properties:
            Path: /v1/domains/admins
            Method: post
        RemoveDomainControl:
          Type: Api
          Properties:
            Path: /v1/domains/admins
            Method: delete
        GetDomainAdmins:
          Type: Api
          Properties:
            Path: /v1/domains/admins/{id}
            Method: get
        GetAdminDomainsCategories:
          Type: Api
          Properties:
            Path: /v1/domains/categories
            Method: get
        FindAllMarketplaces:
          Type: Api
          Properties:
            Path: /v1/domains/marketplaces
            Method: get
  EventManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/event-management/dist
      Events:
        CreateEvent:
          Type: Api
          Properties:
            Path: /v1/events
            Method: post
        FindAllEvents:
          Type: Api
          Properties:
            Path: /v1/events
            Method: get
        FindEventById:
          Type: Api
          Properties:
            Path: /v1/events/{id}
            Method: get
        FindAllEventsChilds:
          Type: Api
          Properties:
            Path: /v1/events/childs/{id}
            Method: get
        GetEventSales:
          Type: Api
          Properties:
            Path: /v1/events/sales/{id}
            Method: get
        FindEventByIdApp:
          Type: Api
          Properties:
            Path: /v1/events/app/{id}
            Method: get
        FindEventsByOrganizationId:
          Type: Api
          Properties:
            Path: /v1/events/organization/{id}
            Method: get
        UpdateEvent:
          Type: Api
          Properties:
            Path: /v1/events/{id}
            Method: put
        DeleteEvent:
          Type: Api
          Properties:
            Path: /v1/events/{id}
            Method: delete
        CheckValidPromoCode:
          Type: Api
          Properties:
            Path: /v1/events/valid-promo-code/{id}
            Method: get
        FindEventsList:
          Type: Api
          Properties:
            Path: /v1/events/list
            Method: get
        FindDomainEvents:
          Type: Api
          Properties:
            Path: /v1/events/domain
            Method: get
        GetDomainEventSales:
          Type: Api
          Properties:
            Path: /v1/events/domain/sales/{id}
            Method: get
        FindEventBySeoName:
          Type: Api
          Properties:
            Path: /v1/events/url/{seo_name}
            Method: get
        SeoNameAvailable:
          Type: Api
          Properties:
            Path: /v1/events/url-available/{seo_name}
            Method: get
        SkuAvailable:
          Type: Api
          Properties:
            Path: /v1/events/sku-available/{sku}
            Method: get
        CreateFavourite:
          Type: Api
          Properties:
            Path: /v1/favourites
            Method: post
        DeleteFavourite:
          Type: Api
          Properties:
            Path: /v1/favourites/{id}
            Method: delete
        GetUserFavourites:
          Type: Api
          Properties:
            Path: /v1/favourites
            Method: get
        DeleteBlock:
          Type: Api
          Properties:
            Path: /v1/events/blocks/{id}
            Method: delete
        DeleteItinerary:
          Type: Api
          Properties:
            Path: /v1/events/itineraries/{id}
            Method: delete
        GetItinerariesByEventId:
          Type: Api
          Properties:
            Path: /v1/events/itineraries/{id}
            Method: get
        GetEventTravelData:
          Type: Api
          Properties:
            Path: /v1/events/travel-data/{id}
            Method: get
        CreateContactRequest:
          Type: Api
          Properties:
            Path: /v1/events/contact-requests
            Method: post
        FindAllContactRequests:
          Type: Api
          Properties:
            Path: /v1/events/contact-requests
            Method: get
        SendNotification:
          Type: Api
          Properties:
            Path: /v1/notifications
            Method: post
        GetNotifications:
          Type: Api
          Properties:
            Path: /v1/notifications
            Method: get
        GetNotificationById:
          Type: Api
          Properties:
            Path: /v1/notifications/{id}
            Method: get
        CreateApp:
          Type: Api
          Properties:
            Path: /v1/notifications/apps
            Method: post
        UpdateApp:
          Type: Api
          Properties:
            Path: /v1/notifications/apps/{id}
            Method: put
        SetRestApiKey:
          Type: Api
          Properties:
            Path: /v1/notifications/apps/key/{id}
            Method: put
        GetApps:
          Type: Api
          Properties:
            Path: /v1/notifications/apps
            Method: get
        GetAppById:
          Type: Api
          Properties:
            Path: /v1/notifications/apps/{id}
            Method: get
        GetAppByDeployDomain:
          Type: Api
          Properties:
            Path: /v1/notifications/apps
            Method: get
  TicketManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/ticket-management/dist
      Events:
        CreateTicket:
          Type: Api
          Properties:
            Path: /v1/tickets
            Method: post
        FindTicketById:
          Type: Api
          Properties:
            Path: /v1/tickets/{id}
            Method: get
        FindAllTicketsByEventId:
          Type: Api
          Properties:
            Path: /v1/tickets/event/{id}
            Method: get
        FindAllTicketsAndExtrasByEventId:
          Type: Api
          Properties:
            Path: /v1/tickets/event/ticket-and-extras/{id}
            Method: get
        FindAllTicketsAndExtrasBoughtByEventId:
          Type: Api
          Properties:
            Path: /v1/tickets/sold/{eventId}
            Method: get
        UpdateTicket:
          Type: Api
          Properties:
            Path: /v1/tickets/{id}
            Method: put
        DeleteTicket:
          Type: Api
          Properties:
            Path: /v1/tickets/{id}
            Method: delete
        CheckIfValidCode:
          Type: Api
          Properties:
            Path: /v1/tickets/is-valid-code
            Method: get
        DeleteGroupDiscount:
          Type: Api
          Properties:
            Path: /v1/tickets/group-discount/{id}
            Method: delete
        UserTicketsPendingFillment:
          Type: Api
          Properties:
            Path: /v1/tickets/fillment/{id}
            Method: get
        FillOrderTicket:
          Type: Api
          Properties:
            Path: /v1/tickets/fillment/{id}
            Method: put
        CreateExtra:
          Type: Api
          Properties:
            Path: /v1/extras
            Method: post
        FindExtraById:
          Type: Api
          Properties:
            Path: /v1/extras/{id}
            Method: get
        FindAllExtrasByEventId:
          Type: Api
          Properties:
            Path: /v1/extras/event/{id}
            Method: get
        UpdateExtra:
          Type: Api
          Properties:
            Path: /v1/extras/{id}
            Method: put
        DeleteExtra:
          Type: Api
          Properties:
            Path: /v1/extras/{id}
            Method: delete
        CreateExtraTemplate:
          Type: Api
          Properties:
            Path: /v1/extra-templates
            Method: post
        FindExtraTemplateById:
          Type: Api
          Properties:
            Path: /v1/extra-templates/{id}
            Method: get
        FindAllExtraTemplates:
          Type: Api
          Properties:
            Path: /v1/extra-templates
            Method: get
        UpdateExtraTemplate:
          Type: Api
          Properties:
            Path: /v1/extra-templates/{id}
            Method: put
        DeleteExtraTemplate:
          Type: Api
          Properties:
            Path: /v1/extra-templates/{id}
            Method: delete
        ExtraTemplateSkuAvailable:
          Type: Api
          Properties:
            Path: /v1/extra-templates/sku-available/{sku}
            Method: get
        AssignExtraTemplatePremises:
          Type: Api
          Properties:
            Path: /v1/extra-templates/premises/{id}
            Method: put
        AssignExtraTemplateDomains:
          Type: Api
          Properties:
            Path: /v1/extra-templates/domains/{id}
            Method: put
        GetExtraTemplateStatistics:
          Type: Api
          Properties:
            Path: /v1/extra-templates/statistics/{id}
            Method: get
  OrderManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/order-management/dist
      Events:
        CreateOrder:
          Type: Api
          Properties:
            Path: /v1/orders
            Method: post
        FindAllOrders:
          Type: Api
          Properties:
            Path: /v1/orders
            Method: get
        FindOrderByOrderTicketId:
          Type: Api
          Properties:
            Path: /v1/orders/order-ticket/{id}
            Method: get
        FindOrderById:
          Type: Api
          Properties:
            Path: /v1/orders/{id}
            Method: get
        FindOrderResumedById:
          Type: Api
          Properties:
            Path: /v1/orders/resumed/{id}
            Method: get
        FindAllOrdersByEventId:
          Type: Api
          Properties:
            Path: /v1/orders/event/{id}
            Method: get
        FindAllOrdersByUserId:
          Type: Api
          Properties:
            Path: /v1/orders/user/{id}
            Method: get
        FindAllOrdersUser:
          Type: Api
          Properties:
            Path: /v1/orders/user
            Method: get
        FindUserOrdersConsumitionDetails:
          Type: Api
          Properties:
            Path: /v1/orders/user/consumition-details
            Method: get
        UpdateOrder:
          Type: Api
          Properties:
            Path: /v1/orders/{id}
            Method: put
        DeleteOrder:
          Type: Api
          Properties:
            Path: /v1/orders/{id}
            Method: delete
        GetOrderReport:
          Type: Api
          Properties:
            Path: /v1/orders/pdf/{id}
            Method: get
        FindUserPendingPayments:
          Type: Api
          Properties:
            Path: /v1/orders/user-pending-payments
            Method: get
        CreateCardOrder:
          Type: Api
          Properties:
            Path: /v1/orders/card
            Method: post
        ConsumeTicket:
          Type: Api
          Properties:
            Path: /v1/orders/consume-ticket/{id}
            Method: put
        ConsumeExtra:
          Type: Api
          Properties:
            Path: /v1/orders/consume-extra/{id}
            Method: put
        GetCommission:
          Type: Api
          Properties:
            Path: /v1/orders/commission/{amount}
            Method: get
        OfficeSecondPayment:
          Type: Api
          Properties:
            Path: /v1/orders/office-second-payment/{id}
            Method: put
        ConfirmBankTransfer:
          Type: Api
          Properties:
            Path: /v1/orders/confirm-bank-transfer/{id}
            Method: put
        GetBankTransfers:
          Type: Api
          Properties:
            Path: /v1/orders/bank-transfers
            Method: get
        SettleBankTransfers:
          Type: Api
          Properties:
            Path: /v1/orders/bank-transfers
            Method: post
        GetSettledBankTransfersPdf:
          Type: Api
          Properties:
            Path: /v1/orders/bank-transfers/pdf/{id}
            Method: get
        ImportOrder:
          Type: Api
          Properties:
            Path: /v1/orders/import
            Method: post
        FindOrderBySku:
          Type: Api
          Properties:
            Path: /v1/orders/sku/{sku}
            Method: get
        CancelOrderTicketExtra:
          Type: Api
          Properties:
            Path: /v1/orders/cancel/{id}
            Method: put
        SetAgreementPdfUrl:
          Type: Api
          Properties:
            Path: /v1/orders/set-agreement-pdf-url/{id}
            Method: put
        CreateRefund:
          Type: Api
          Properties:
            Path: /v1/refunds
            Method: post
        FindRefundById:
          Type: Api
          Properties:
            Path: /v1/refunds/{id}
            Method: get
        FindAllRefunds:
          Type: Api
          Properties:
            Path: /v1/refunds
            Method: get
        ApplyRefund:
          Type: Api
          Properties:
            Path: /v1/refunds/{id}
            Method: put
  PaymentManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/payment-management/dist
      Events:
        CreatePayment:
          Type: Api
          Properties:
            Path: /v1/payments
            Method: post
        CreatePaypalPayment:
          Type: Api
          Properties:
            Path: /v1/payments/paypal-payment
            Method: post
        CreatePaypalPaymentV2:
          Type: Api
          Properties:
            Path: /v1/payments/paypal-payment-v2
            Method: post
        CreateStripePayment:
          Type: Api
          Properties:
            Path: /v1/payments/stripe-payment
            Method: post
        CreateStripeSuscription:
          Type: Api
          Properties:
            Path: /v1/payments/stripe-subscription
            Method: post
        OkPayment:
          Type: Api
          Properties:
            Path: /v1/payments/ok
            Method: get
        KoPayment:
          Type: Api
          Properties:
            Path: /v1/payments/ko
            Method: get
        NotificationPayment:
          Type: Api
          Properties:
            Path: /v1/payments/notification-payment
            Method: post
        NotificationPaypal:
          Type: Api
          Properties:
            Path: /v1/payments/notification-paypal
            Method: post
        NotificationStripe:
          Type: Api
          Properties:
            Path: /v1/payments/notification-stripe
            Method: post
        ManualOkPayment:
          Type: Api
          Properties:
            Path: /v1/payments/manual-ok
            Method: get
        CreateRefundRedsys:
          Type: Api
          Properties:
            Path: /v1/payments/refund-redsys
            Method: post
        GetMovements:
          Type: Api
          Properties:
            Path: /v1/payments/movements
            Method: get
        FindAllBilling:
          Type: Api
          Properties:
            Path: /v1/billing
            Method: get
        PdfInvoices:
          Type: Api
          Properties:
            Path: /v1/billing/pdf-invoices
            Method: get
        PdfInvoiceById:
          Type: Api
          Properties:
            Path: /v1/billing/pdf-invoices/{id}
            Method: get
        GetSepaXml:
          Type: Api
          Properties:
            Path: /v1/billing/sepa-xml
            Method: get
        GenerateBillings:
          Type: Api
          Properties:
            Path: /v1/billing/generate-billings
            Method: get
        GenerateBillingsNew:
          Type: Api
          Properties:
            Path: /v1/billing/generate-billings-new
            Method: get
        GenerateBillingForOrder:
          Type: Api
          Properties:
            Path: /v1/billing/generate-billings/{id}
            Method: get
        RearangeBillingNumbers:
          Type: Api
          Properties:
            Path: /v1/billing/rearange-numbers
            Method: get
        FindAllSepas:
          Type: Api
          Properties:
            Path: /v1/sepas
            Method: get
        GenerateSepas:
          Type: Api
          Properties:
            Path: /v1/sepas/generate
            Method: get
        RegenerateSepas:
          Type: Api
          Properties:
            Path: /v1/sepas/regenerate/{id}
            Method: put
        DownloadSepa:
          Type: Api
          Properties:
            Path: /v1/sepas/download/{id}
            Method: get
        MarkSepaAsPayed:
          Type: Api
          Properties:
            Path: /v1/sepas/mark-as-payed/{id}
            Method: get
        MarkSepaAsRevised:
          Type: Api
          Properties:
            Path: /v1/sepas/mark-as-revised/{id}
            Method: post
        FindAllPdfs:
          Type: Api
          Properties:
            Path: /v1/sepas/pdfs
            Method: get
        GeneratePdfInvoice:
          Type: Api
          Properties:
            Path: /v1/sepas/pdfs/generate
            Method: get
        RegeneratePdf:
          Type: Api
          Properties:
            Path: /v1/sepas/pdfs/regenerate/{id}
            Method: put
        DownloadPdf:
          Type: Api
          Properties:
            Path: /v1/sepas/pdfs/download/{id}
            Method: get
        SetPremiseCommissions:
          Type: Api
          Properties:
            Path: /v1/commissions/{id}
            Method: post
        GetPremiseCommissions:
          Type: Api
          Properties:
            Path: /v1/commissions/{id}
            Method: get
        SetPremiseTPVs:
          Type: Api
          Properties:
            Path: /v1/commissions/tpvs/{id}
            Method: post
        GetPremiseTPVs:
          Type: Api
          Properties:
            Path: /v1/commissions/tpvs/{id}
            Method: get
  StatisticsManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/statistics-management/dist
      Events:
        FindAllCnae:
          Type: Api
          Properties:
            Path: /v1/utils/cnaes
            Method: get
        FindAllCities:
          Type: Api
          Properties:
            Path: /v1/utils/cities
            Method: get
        FindCitiesOfPremises:
          Type: Api
          Properties:
            Path: /v1/utils/cities-of-premises
            Method: get
        FindAllCountries:
          Type: Api
          Properties:
            Path: /v1/utils/countries
            Method: get
        FindCCAAsByCountryCode:
          Type: Api
          Properties:
            Path: /v1/utils/states/{countryCode}
            Method: get
        FindRegions:
          Type: Api
          Properties:
            Path: /v1/utils/regions
            Method: get
        GetHomeInfo:
          Type: Api
          Properties:
            Path: /v1/utils/home
            Method: get
        GetHomeStatistics:
          Type: Api
          Properties:
            Path: /v1/utils/home/statistics
            Method: get
        GetHomeNextEvents:
          Type: Api
          Properties:
            Path: /v1/utils/home/next-events
            Method: get
        GetNextEventTicketsSold:
          Type: Api
          Properties:
            Path: /v1/utils/home/next-events/{id}
            Method: get
        GetStatistics:
          Type: Api
          Properties:
            Path: /v1/utils/statistics
            Method: get
        GetSpecificStatistics:
          Type: Api
          Properties:
            Path: /v1/utils/statistics/{key}
            Method: get
        GenerateMonthEventsStatistics:
          Type: Api
          Properties:
            Path: /v1/utils/month-events-statistics
            Method: post
        GetMonthEventsStatistics:
          Type: Api
          Properties:
            Path: /v1/utils/month-events-statistics
            Method: get
        SaveReport:
          Type: Api
          Properties:
            Path: /v1/utils/reports
            Method: post
        GetReports:
          Type: Api
          Properties:
            Path: /v1/utils/reports
            Method: get
        DownloadReport:
          Type: Api
          Properties:
            Path: /v1/utils/reports/{id}
            Method: get
  ContentManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/content-management/dist
      Events:
        CreateBlogPost:
          Type: Api
          Properties:
            Path: /v1/blogs
            Method: post
        FinAllBlogPost:
          Type: Api
          Properties:
            Path: /v1/blogs
            Method: get
        FindBlogPostById:
          Type: Api
          Properties:
            Path: /v1/blogs/{id}
            Method: get
        UpdateBlogPostById:
          Type: Api
          Properties:
            Path: /v1/blogs/{id}
            Method: put
        DeleteBlogPostById:
          Type: Api
          Properties:
            Path: /v1/blogs/{id}
            Method: delete
        FindBlogPostBySlug:
          Type: Api
          Properties:
            Path: /v1/blogs/slug/{slug}
            Method: get
        BlogSlugAvailable:
          Type: Api
          Properties:
            Path: /v1/blogs/slug-available/{slug}
            Method: get
        CreateBlogTag:
          Type: Api
          Properties:
            Path: /v1/tags
            Method: post
        FinAllBlogTag:
          Type: Api
          Properties:
            Path: /v1/tags
            Method: get
        FinAllBlogTagsBySelects:
          Type: Api
          Properties:
            Path: /v1/tags/selects
            Method: get
        FindBlogTagById:
          Type: Api
          Properties:
            Path: /v1/tags/{id}
            Method: get
        UpdateBlogTagById:
          Type: Api
          Properties:
            Path: /v1/tags/{id}
            Method: put
        DeleteBlogTagById:
          Type: Api
          Properties:
            Path: /v1/tags/{id}
            Method: delete
        GetTagsList:
          Type: Api
          Properties:
            Path: /v1/tags/list
            Method: get
        TagSlugAvailable:
          Type: Api
          Properties:
            Path: /v1/tags/slug-available/{slug}
            Method: get
        CreatePage:
          Type: Api
          Properties:
            Path: /v1/pages
            Method: post
        FindAllPages:
          Type: Api
          Properties:
            Path: /v1/pages
            Method: get
        FindPageById:
          Type: Api
          Properties:
            Path: /v1/pages/{id}
            Method: get
  TourManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/tour-management/dist
      Events:
        CreateTourLeader:
          Type: Api
          Properties:
            Path: /v1/tour-leaders
            Method: post
        FindAllTourLeaders:
          Type: Api
          Properties:
            Path: /v1/tour-leaders
            Method: get
        FindTourLeaderById:
          Type: Api
          Properties:
            Path: /v1/tour-leaders/{id}
            Method: get
        UpdateTourLeader:
          Type: Api
          Properties:
            Path: /v1/tour-leaders/{id}
            Method: put
        DeleteTourLeader:
          Type: Api
          Properties:
            Path: /v1/tour-leaders/{id}
            Method: delete
        FindTourLeadersList:
          Type: Api
          Properties:
            Path: /v1/tour-leaders/list
            Method: get
        AssignTourLeaderDomains:
          Type: Api
          Properties:
            Path: /v1/tour-leaders/domains/{id}
            Method: put
        CreateTransport:
          Type: Api
          Properties:
            Path: /v1/transports
            Method: post
        FindAllTransports:
          Type: Api
          Properties:
            Path: /v1/transports
            Method: get
        FindTransportById:
          Type: Api
          Properties:
            Path: /v1/transports/{id}
            Method: get
        UpdateTransport:
          Type: Api
          Properties:
            Path: /v1/transports/{id}
            Method: put
        DeleteTransport:
          Type: Api
          Properties:
            Path: /v1/transports/{id}
            Method: delete
        FindTransportsList:
          Type: Api
          Properties:
            Path: /v1/transports/list
            Method: get
        CreateTransportTemplate:
          Type: Api
          Properties:
            Path: /v1/transports/templates
            Method: post
        FindAllTransportTemplates:
          Type: Api
          Properties:
            Path: /v1/transports/templates
            Method: get
        FindTransportTemplateById:
          Type: Api
          Properties:
            Path: /v1/transports/templates/{id}
            Method: get
        UpdateTransportTemplate:
          Type: Api
          Properties:
            Path: /v1/transports/templates/{id}
            Method: put
        DeleteTransportTemplate:
          Type: Api
          Properties:
            Path: /v1/transports/templates/{id}
            Method: delete
        CreateTransportType:
          Type: Api
          Properties:
            Path: /v1/transports/types
            Method: post
        FindAllTransportTypes:
          Type: Api
          Properties:
            Path: /v1/transports/types
            Method: get
        AssignTransportDomains:
          Type: Api
          Properties:
            Path: /v1/transports/domains/{id}
            Method: put
        AssignTransportTemplateDomains:
          Type: Api
          Properties:
            Path: /v1/transports/templates/domains/{id}
            Method: put
        GetTransportOnTripByID:
          Type: Api
          Properties:
            Path: /v1/transports/on-trip/{id}
            Method: get
        GetTransportOnTripTravelersByID:
          Type: Api
          Properties:
            Path: /v1/transports/on-trip-travelers/{id}
            Method: get
        SetTransportOnTripTravelersByID:
          Type: Api
          Properties:
            Path: /v1/transports/on-trip-travelers/{id}
            Method: post
        CreateHotel:
          Type: Api
          Properties:
            Path: /v1/hotels
            Method: post
        FindAllHotels:
          Type: Api
          Properties:
            Path: /v1/hotels
            Method: get
        FindHotelById:
          Type: Api
          Properties:
            Path: /v1/hotels/{id}
            Method: get
        UpdateHotel:
          Type: Api
          Properties:
            Path: /v1/hotels/{id}
            Method: put
        DeleteHotel:
          Type: Api
          Properties:
            Path: /v1/hotels/{id}
            Method: delete
        FindHotelsList:
          Type: Api
          Properties:
            Path: /v1/hotels/list
            Method: get
        CreateHotelType:
          Type: Api
          Properties:
            Path: /v1/hotels/types
            Method: post
        GetHotelTypes:
          Type: Api
          Properties:
            Path: /v1/hotels/types
            Method: get
        CreateHotelRoomBedType:
          Type: Api
          Properties:
            Path: /v1/hotels/bed-types
            Method: post
        GetHotelBedTypes:
          Type: Api
          Properties:
            Path: /v1/hotels/bed-types
            Method: get
        AssignHotelDomains:
          Type: Api
          Properties:
            Path: /v1/hotels/domains/{id}
            Method: put
        GetHotelOnTripByID:
          Type: Api
          Properties:
            Path: /v1/hotels/on-trip/{id}
            Method: get
        GetHotelOnTripTravelersByID:
          Type: Api
          Properties:
            Path: /v1/hotels/on-trip-travelers/{id}
            Method: get
        SetHotelOnTripTravelersByID:
          Type: Api
          Properties:
            Path: /v1/hotels/on-trip-travelers/{id}
            Method: post
        CreateHotelTemplate:
          Type: Api
          Properties:
            Path: /v1/hotels/templates
            Method: post
        FindAllHotelTemplates:
          Type: Api
          Properties:
            Path: /v1/hotels/templates
            Method: get
        FindHotelTemplateById:
          Type: Api
          Properties:
            Path: /v1/hotels/templates/{id}
            Method: get
        UpdateHotelTemplate:
          Type: Api
          Properties:
            Path: /v1/hotels/templates/{id}
            Method: put
        DeleteHotelTemplate:
          Type: Api
          Properties:
            Path: /v1/hotels/templates/{id}
            Method: delete
        AssignHotelTemplateDomains:
          Type: Api
          Properties:
            Path: /v1/hotels/templates/domains/{id}
            Method: put
        CreateTourPoint:
          Type: Api
          Properties:
            Path: /v1/tour-points
            Method: post
        FindAllTourPoints:
          Type: Api
          Properties:
            Path: /v1/tour-points
            Method: get
        FindTourPointById:
          Type: Api
          Properties:
            Path: /v1/tour-points/{id}
            Method: get
        UpdateTourPoint:
          Type: Api
          Properties:
            Path: /v1/tour-points/{id}
            Method: put
        DeleteTourPoint:
          Type: Api
          Properties:
            Path: /v1/tour-points/{id}
            Method: delete
        FindTourPointsList:
          Type: Api
          Properties:
            Path: /v1/tour-points/list
            Method: get
        AssignTourPointDomains:
          Type: Api
          Properties:
            Path: /v1/tour-points/domains/{id}
            Method: put
  GamingManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/gaming-management/dist
      Events:
        LoginUser:
          Type: Api
          Properties:
            Path: /v1/lifematch/login
            Method: post
        UserExist:
          Type: Api
          Properties:
            Path: /v1/lifematch/user-exists/{email}
            Method: get
        ForgotPassword:
          Type: Api
          Properties:
            Path: /v1/lifematch/forgot-password
            Method: post
        ResetPassword:
          Type: Api
          Properties:
            Path: /v1/lifematch/reset-password
            Method: post
        CreateUser:
          Type: Api
          Properties:
            Path: /v1/lifematch/users
            Method: post
        GetAllUsers:
          Type: Api
          Properties:
            Path: /v1/lifematch/users
            Method: get
        DeleteUserByTokenAccount:
          Type: Api
          Properties:
            Path: /v1/lifematch/users/token
            Method: delete
        GetUserById:
          Type: Api
          Properties:
            Path: /v1/lifematch/users/{id}
            Method: get
        GetUserByToken:
          Type: Api
          Properties:
            Path: /v1/lifematch/users/token
            Method: get
        UpdateUserById:
          Type: Api
          Properties:
            Path: /v1/lifematch/users/{id}
            Method: put
        UpdateUserByToken:
          Type: Api
          Properties:
            Path: /v1/lifematch/users/token
            Method: put
        CreateSwipe:
          Type: Api
          Properties:
            Path: /v1/lifematch/swipes
            Method: post
        GetUserSwipes:
          Type: Api
          Properties:
            Path: /v1/lifematch/swipes
            Method: get
        GetAllMyMatches:
          Type: Api
          Properties:
            Path: /v1/lifematch/matches
            Method: get
        CreateEvent:
          Type: Api
          Properties:
            Path: /v1/lifematch/events
            Method: post
        GetAllEvents:
          Type: Api
          Properties:
            Path: /v1/lifematch/events
            Method: get
        GetEventById:
          Type: Api
          Properties:
            Path: /v1/lifematch/events/{id}
            Method: get
        GetEventBySku:
          Type: Api
          Properties:
            Path: /v1/lifematch/events/sku/{sku}
            Method: get
        UpdateEvent:
          Type: Api
          Properties:
            Path: /v1/lifematch/events/{id}
            Method: put
        DeleteEvent:
          Type: Api
          Properties:
            Path: /v1/lifematch/events/{id}
            Method: delete
        AssignEventToUser:
          Type: Api
          Properties:
            Path: /v1/lifematch/events/assign-user/{sku}
            Method: put
        CreateOrder:
          Type: Api
          Properties:
            Path: /v1/lifematch/orders
            Method: post
        GetOrders:
          Type: Api
          Properties:
            Path: /v1/lifematch/orders
            Method: get
        GetUserOrders:
          Type: Api
          Properties:
            Path: /v1/lifematch/orders/user
            Method: get
        CreateRedsysPayment:
          Type: Api
          Properties:
            Path: /v1/lifematch/payments/redsys
            Method: post
        CreatePaypalPayment:
          Type: Api
          Properties:
            Path: /v1/lifematch/payments/paypal
            Method: post
        NotificationRedsysPayment:
          Type: Api
          Properties:
            Path: /v1/lifematch/payments/notifications/redsys
            Method: post
        NotificationPaypalPayment:
          Type: Api
          Properties:
            Path: /v1/lifematch/payments/notifications/paypal
            Method: post
  B2bManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/b2b-management/dist
      Events:
        CreateAgent:
          Type: Api
          Properties:
            Path: /v1/b2b/agents
            Method: post
        FindAgents:
          Type: Api
          Properties:
            Path: /v1/b2b/agents
            Method: get
        UpdateAgent:
          Type: Api
          Properties:
            Path: /v1/b2b/agents/{id}
            Method: put
        GetAgentSales:
          Type: Api
          Properties:
            Path: /v1/b2b/agents/{id}
            Method: get
        FindAllSales:
          Type: Api
          Properties:
            Path: /v1/b2b/sales
            Method: get
        FindAllSalesGrouped:
          Type: Api
          Properties:
            Path: /v1/b2b/sales/grouped
            Method: get
        FindAllSalesGroupedData:
          Type: Api
          Properties:
            Path: /v1/b2b/sales/grouped/data
            Method: get
        FindEventSales:
          Type: Api
          Properties:
            Path: /v1/b2b/sales/event/{id}
            Method: get
        FindEventSalesResumed:
          Type: Api
          Properties:
            Path: /v1/b2b/sales/event-resumed/{id}
            Method: get
        FindEventAgentSales:
          Type: Api
          Properties:
            Path: /v1/b2b/sales/event/agent/{id}
            Method: get
        CreateAgreement:
          Type: Api
          Properties:
            Path: /v1/b2b/agreements
            Method: post
        FindAllAgreements:
          Type: Api
          Properties:
            Path: /v1/b2b/agreements
            Method: get
        UpdateAgreement:
          Type: Api
          Properties:
            Path: /v1/b2b/agreements/{id}
            Method: put
        DeleteAgreement:
          Type: Api
          Properties:
            Path: /v1/b2b/agreements/{id}
            Method: delete
        FindAgencyAgreements:
          Type: Api
          Properties:
            Path: /v1/b2b/agreements/agency
            Method: get
        FindTripAgreements:
          Type: Api
          Properties:
            Path: /v1/b2b/agreements/trips
            Method: get
        FindAllCatalogs:
          Type: Api
          Properties:
            Path: /v1/b2b/catalogs
            Method: get
        FindTripCatalogs:
          Type: Api
          Properties:
            Path: /v1/b2b/catalogs/trips/{id}
            Method: get
        FindAllB2bCommercials:
          Type: Api
          Properties:
            Path: /v1/b2b/b2b-commercials
            Method: get
        SettlePayment:
          Type: Api
          Properties:
            Path: /v1/b2b/payments/settle
            Method: post
        SendContactNotification:
          Type: Api
          Properties:
            Path: /v1/b2b/contact/{id}
            Method: post
  CommunicationManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/communication-management/dist
      Events:
        SendMailToEventAssistants:
          Type: Api
          Properties:
            Path: /v1/mailing/event/{id}
            Method: post
        CreateMailingPlan:
          Type: Api
          Properties:
            Path: /v1/mailing/plans
            Method: post
        GetMailingPlans:
          Type: Api
          Properties:
            Path: /v1/mailing/plans
            Method: get
        GetMailingPlanById:
          Type: Api
          Properties:
            Path: /v1/mailing/plans/{id}
            Method: get
        CheckMailingPlans:
          Type: Api
          Properties:
            Path: /v1/mailing/plans/check
            Method: get
        DeActivateMailingPlan:
          Type: Api
          Properties:
            Path: /v1/mailing/plans/{id}
            Method: put
  HousingManagementFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/housing-management/dist
      Events:
        CreateEvent:
          Type: Api
          Properties:
            Path: /v1/housing
            Method: post
        FindAllHousing:
          Type: Api
          Properties:
            Path: /v1/housing
            Method: get
        FindHousingById:
          Type: Api
          Properties:
            Path: /v1/housing/{id}
            Method: get
        UpdateHousing:
          Type: Api
          Properties:
            Path: /v1/housing/{id}
            Method: put
        DeleteHousing:
          Type: Api
          Properties:
            Path: /v1/housing/{id}
            Method: delete
        FindAllOwners:
          Type: Api
          Properties:
            Path: /v1/housing/owners
            Method: get
        FindOwnerById:
          Type: Api
          Properties:
            Path: /v1/housing/owners/{id}
            Method: get
        UpdateOwner:
          Type: Api
          Properties:
            Path: /v1/housing/owners/{id}
            Method: put
        FindHousingDomainEvents:
          Type: Api
          Properties:
            Path: /v1/housing/events
            Method: get
  ObjectStorageFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./packages/object-storage/dist
      Events:
        UploadImage:
          Type: Api
          Properties:
            Path: /v1/images
            Method: post
        CreatePrivateObject:
          Type: Api
          Properties:
            Path: /v1/private-objects
            Method: post
        GetPrivateObject:
          Type: Api
          Properties:
            Path: /v1/private-objects/{key+}
            Method: get
        DeletePrivateObject:
          Type: Api
          Properties:
            Path: /v1/private-objects/{key+}
            Method: delete
      Environment:
        Variables:
          S3_BUCKET_NAME: tikitup-test
          S3_PRIVATE_BUCKET_NAME: tikitup-private-test
